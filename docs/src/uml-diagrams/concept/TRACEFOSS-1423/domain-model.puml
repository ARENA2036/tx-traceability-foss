@startuml

title: Domain Model


abstract Asset {
        *   id : String
        owner : Owner
        childRelations : List<Relation>
        parentRelations : List<Relation>

        activeAlert: boolean
        qualityType : QualityType
        underInvestigation : boolean
        semanticDataModelType : SemanticDataModelType
        idShort : String
        manufacturerPartId : String /' partTypeInformation.manufacturerPartId '/
        nameAtManufacturer : String /' partTypeInformation.nameAtManufacturer '/
        classification : String /' partTypeInformation.classification '/
        businessPartner : String /' BusinessPartner '/
        abstract String getSemanticDataModelId()
        van : String

}

note left
    Rename Descriptions to Relations
end note

entity Relation {
       *   id : String
       idShort : String
}

enum SemanticDataModelType {
    BATCH,
    SERIALPART,
    JUSTINSEQUENCEPART,
    TRACTIONBATTERYCODE,
    PARTASPLANNED,
    PARTSITEINFORMATIONASPLANNED
}


entity AsBuiltAspectModel {
    manufacturingDate : Instant
    manufacturingCountry : String (iso-3)
    customerPartId : String
    nameAtCustomer : String
}

entity SerialPart {
       * partInstanceID: String
       String: getSemanticDataModelId() return batchId
       SemanticModelType.SERIALPART
}

entity Batch {
     * BatchID : String
     String: getSemanticDataModelId() return batchId
     SemanticModelType.BATCH
}

entity JustInSequencePart {
     * jisNumber : String
     String: getSemanticDataModelId() return jisNumber
     SemanticModelType.JUSTINSEQUENCEPART
}

entity TractionBatteryCode {
    * uuid4 : String /' UUID ID '/
    productType: String
    tractionBatteryCode: String
    subComponents : List<TractionBatteryCode>
}

entity PartAsPlanned {
/'
    1.0.0
'/
    validityPeriodFrom : Instance
    validityPeriodTo: Instance
}

entity PartSiteInformationAsPlanned {
/'
    1.0.0
    Currently this is not ready for implementing - there is no specification right now.
'/
    functionValidFrom : Instance
    functionValidUntil : Instance
}

entity AsPlannedAspectModel {
}

SemanticModelType --> Asset
Asset <|.. AsBuiltAspectModel
Asset <|.. AsPlannedAspectModel

AsBuiltAspectModel <|.. Batch
AsBuiltAspectModel <|.. SerialPart
AsBuiltAspectModel <|.. JustInSequencePart
AsBuiltAspectModel <|.. TractionBatteryCode

AsPlannedAspectModel <|.. PartAsPlanned
AsPlannedAspectModel <|.. PartSiteInformationAsPlanned

Asset }o--- Relation : childRelations
Asset }o---  Relation : parentRelations

@enduml
