= Scenario 1: Return Asset Contract Agreements

This section describes what happens when a user requests contract agreements from Trace-X via the /contracts API.

[plantuml,target=return-all-assets,format=svg]
....
include::../../../../uml-diagrams/arc42/runtime-view/data-sovereignty/get-all-contracts-sequenceflow.puml[]
....

==== Overview

When a user requests contract agreements, TraceX checks if the user has an adequate role ('ROLE_ADMIN', 'ROLE_SUPERVISOR').
If yes, then the requested assets will be mapped to their contract agreement id via a database view.
These contract agreement ids will be then requested on EDC side via POST/management/v2/contractagreements/request and GET /management/v2/contractagreements/\{ContractAgreementId\}/negotiation to get the relevant information.
The result is then returned by the endpoint as a pageable result.

If no asset ids are provided in the request, the first 50 contract agreement ids in the database view will be returned.
